---
// Component imports and setup JavaScript go here!
import BaseLayout from '../../../layouts/BaseLayout.astro'
import {generateSlug} from '../../../utils/helpers.js'


  const allPosts = Astro.fetchContent('../*.md');
  // create a set of all individual categories
  const allCategoriesUnique = new Set();

  allPosts.map(post => {
      post.categories && post.categories.map(category => allCategoriesUnique.add(category))
  })

  const allCategoriesData = []
  // loop through each category and create an object with a slug
  allCategoriesUnique.forEach((category) => {
    allCategoriesData.push({name: category, slug: `${generateSlug(category)}`});
  })


const title = `Categories`;
---

<BaseLayout title={title}>
  <div>
    <h1>{title}</h1>
    <ul>
      {allCategoriesData.map((category) => (
      <li><a href={`/blog/categories/${category.slug}/`}>{category.name}</a></li>
    ))}
    </ul>
  </div>
</BaseLayout>
